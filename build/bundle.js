var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function f(){return u("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function h(t,e){t.value=null==e?"":e}let $;function y(t){$=t}function b(t){(function(){if(!$)throw new Error("Function called outside component initialization");return $})().$$.on_mount.push(t)}const w=[],k=[],C=[],v=[],x=Promise.resolve();let E=!1;function S(t){C.push(t)}let _=!1;const O=new Set;function T(){if(!_){_=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];y(e),G(e.$$)}for(y(null),w.length=0;k.length;)k.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];O.has(e)||(O.add(e),e())}C.length=0}while(w.length);for(;v.length;)v.pop()();E=!1,_=!1,O.clear()}}function G(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const N=new Set;let M;function L(t,e){t&&t.i&&(N.delete(t),t.i(e))}function j(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),M.c.push((()=>{N.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function A(t,e){t.d(1),e.delete(t.key)}function D(t,e){j(t,1,1,(()=>{e.delete(t.key)}))}function I(t,e,n,o,r,s,i,c,a,l,u,d){let f=t.length,g=s.length,m=f;const p={};for(;m--;)p[t[m].key]=m;const h=[],$=new Map,y=new Map;for(m=g;m--;){const t=d(r,s,m),c=n(t);let a=i.get(c);a?o&&a.p(t,e):(a=l(c,t),a.c()),$.set(c,h[m]=a),c in p&&y.set(c,Math.abs(m-p[c]))}const b=new Set,w=new Set;function k(t){L(t,1),t.m(c,u),i.set(t.key,t),u=t.first,g--}for(;f&&g;){const e=h[g-1],n=t[f-1],o=e.key,r=n.key;e===n?(u=e.first,f--,g--):$.has(r)?!i.has(o)||b.has(o)?k(e):w.has(r)?f--:y.get(o)>y.get(r)?(w.add(o),k(e)):(b.add(r),f--):(a(n,i),f--)}for(;f--;){const e=t[f];$.has(e.key)||a(e,i)}for(;g;)k(h[g-1]);return h}function R(t){t&&t.c()}function q(t,n,s,i){const{fragment:c,on_mount:a,on_destroy:l,after_update:u}=t.$$;c&&c.m(n,s),i||S((()=>{const n=a.map(e).filter(r);l?l.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(S)}function P(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(w.push(t),E||(E=!0,x.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,r,s,i,c,l,u,d=[-1]){const f=$;y(e);const g=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||f.$$.root};u&&u(g.root);let m=!1;if(g.ctx=s?s(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return g.ctx&&c(g.ctx[t],g.ctx[t]=r)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](r),m&&H(e,t)),n})):[],g.update(),m=!0,o(g.before_update),g.fragment=!!i&&i(g.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);g.fragment&&g.fragment.l(t),t.forEach(a)}else g.fragment&&g.fragment.c();r.intro&&L(e.$$.fragment),q(e,r.target,r.anchor,r.customElement),T()}y(f)}class J{$destroy(){P(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const U=[];function Y(e,n=t){let o;const r=new Set;function i(t){if(s(e,t)&&(e=t,o)){const t=!U.length;for(const t of r)t[1](),U.push(t,e);if(t){for(let t=0;t<U.length;t+=2)U[t][0](U[t+1]);U.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,c=t){const a=[s,c];return r.add(a),1===r.size&&(o=n(i)||t),s(e),()=>{r.delete(a),0===r.size&&(o(),o=null)}}}}async function W(t,e,n){return await fetch("https://kij.willy-selma.de/db"+e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>t.json()))}function B(t){const e=new Date(1e3*t),n=e.getFullYear(),o=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}.${o}.${n} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}async function F(){const t=await W("GET","/games?_sort=date&_order=desc");K.update((e=>t))}const Z=Y({id:-1}),K=Y([]),V=Y([]),Q=Y({}),X=(t,e)=>localStorage.setItem(t,e),tt=(t,e)=>e?JSON.parse(localStorage.getItem(t)):localStorage.getItem(t);(async()=>{await async function(){const t=await W("GET","/settings/");Q.update((e=>t))}(),await F()})();const et="wss://kij.willy-selma.de/ws",nt="[WSS]";let ot,rt=null;function st(t){console.log(nt,"sendMessage",t,ot),ot&&ot.send(JSON.stringify(t))}function it(t){const e=window.bowser.getParser(window.navigator.userAgent);t&&(X("nickname",t),st({message:"SET_CLIENTNICK",type:["pwa",e.parsedResult.os.name,e.parsedResult.platform.type,e.parsedResult.browser.name].map((t=>{return(e=t).charAt(0).toUpperCase()+e.slice(1);var e})).join(" / "),nick:t}))}function ct(){console.log(nt,"heartbeat"),null!==rt&&clearTimeout(rt),rt=setTimeout((()=>{}),31e3)}function at(e){let n;return{c(){n=l("a"),n.innerHTML='<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm svelte-1q9kuzr"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>',m(n,"href","https://github.com/Neofonie/kickerjoiner-pwa"),m(n,"class","github-corner svelte-1q9kuzr"),m(n,"aria-label","View source on GitHub")},m(t,e){c(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}class lt extends J{constructor(t){super(),z(this,t,null,at,s,{})}}function ut(e){let n,r,s,u,f,p,$,y;return{c(){n=l("div"),r=l("h1"),r.textContent="Joiner",s=d(),u=l("input"),f=d(),p=l("button"),p.textContent="+1",m(u,"type","text"),m(u,"placeholder","player name"),m(p,"id","plusone"),m(n,"class","joiner container")},m(t,o){c(t,n,o),i(n,r),i(n,s),i(n,u),h(u,e[0]),i(n,f),i(n,p),$||(y=[g(u,"input",e[2]),g(u,"keypress",e[3]),g(p,"click",e[1])],$=!0)},p(t,[e]){1&e&&u.value!==t[0]&&h(u,t[0])},i:t,o:t,d(t){t&&a(n),$=!1,o(y)}}}function dt(t,e,n){let o;V.subscribe((t=>t));const r=()=>{st({message:"PLUS_ONE",nick:o||"anonymous"})};b((()=>{n(0,o=tt("nickname"))}));return[o,r,function(){o=this.value,n(0,o)},t=>"enter"===t.key.toLowerCase()&&r()]}class ft extends J{constructor(t){super(),z(this,t,dt,ut,s,{})}}function gt(t,e,n){const o=t.slice();return o[6]=e[n],o}function mt(t){let e,n;return{c(){e=l("div"),m(e,"class","done-layer svelte-geqcr5"),m(e,"label","GOGOGO"),m(e,"date",n=B(t[0].donedate))},m(t,n){c(t,e,n)},p(t,o){1&o&&n!==(n=B(t[0].donedate))&&m(e,"date",n)},d(t){t&&a(e)}}}function pt(e){let n;return{c(){n=l("span"),n.textContent="GOGOGO",m(n,"class","gogogo")},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function ht(t){let e;function n(t,e){return t[1]?$t:yt}let o=n(t),r=o(t);return{c(){r.c(),e=f()},m(t,n){r.m(t,n),c(t,e,n)},p(t,s){o===(o=n(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&a(e)}}}function $t(t){let e,n,o;function r(){return t[4](t[6])}return{c(){e=l("button"),e.textContent="GOGOGO"},m(t,s){c(t,e,s),n||(o=g(e,"click",r),n=!0)},p(e,n){t=e},d(t){t&&a(e),n=!1,o()}}}function yt(e){let n;return{c(){n=u("+1")},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function bt(t,e){let n,o,r,s,f,h,$,y,b,w,k,C,v,x,E,S,_,O,T,G,N=e[6].id+"",M=e[6].clientid+"",L=e[6].nick+"",j=B(e[6].date)+"";function A(t,e){return t[6].gogogo?pt:ht}let D=A(e),I=D(e);function R(){return e[5](e[6])}return{key:t,first:null,c(){n=l("tr"),o=l("td"),r=u(N),s=d(),f=l("td"),h=u(M),$=d(),y=l("td"),b=u(L),w=d(),k=l("td"),C=u(j),v=d(),x=l("td"),I.c(),E=d(),S=l("td"),_=l("i"),O=d(),m(k,"center",""),m(x,"center",""),m(_,"class","far fa-trash-alt"),m(S,"center",""),this.first=n},m(t,e){c(t,n,e),i(n,o),i(o,r),i(n,s),i(n,f),i(f,h),i(n,$),i(n,y),i(y,b),i(n,w),i(n,k),i(k,C),i(n,v),i(n,x),I.m(x,null),i(n,E),i(n,S),i(S,_),i(n,O),T||(G=g(_,"click",R),T=!0)},p(t,n){e=t,1&n&&N!==(N=e[6].id+"")&&p(r,N),1&n&&M!==(M=e[6].clientid+"")&&p(h,M),1&n&&L!==(L=e[6].nick+"")&&p(b,L),1&n&&j!==(j=B(e[6].date)+"")&&p(C,j),D===(D=A(e))&&I?I.p(e,n):(I.d(1),I=D(e),I&&(I.c(),I.m(x,null)))},d(t){t&&a(n),I.d(),T=!1,G()}}}function wt(e){let n,o,r,s,f,h,$,y,b,w,k,C,v,x,E,S,_,O,T,G,N=e[0].id+"",M=B(e[0].date)+"",L=[],j=new Map,D=e[0].done&&mt(e),R=e[0].joiner;const q=t=>t[6].id;for(let t=0;t<R.length;t+=1){let n=gt(e,R,t),o=q(n);j.set(o,L[t]=bt(o,n))}return{c(){n=l("div"),D&&D.c(),o=d(),r=l("table"),s=l("thead"),f=l("tr"),h=l("td"),$=u("#"),y=u(N),b=u(" / "),w=u(M),k=d(),C=l("td"),v=l("i"),x=d(),E=l("tr"),E.innerHTML='<th>ID</th> \n            <th>CID</th> \n            <th>Nick</th> \n            <th center="">Date</th> \n            <th center="" width="100">State</th> \n            <th></th>',S=d(),_=l("tbody");for(let t=0;t<L.length;t+=1)L[t].c();m(h,"colspan","5"),m(v,"class","game-delete far fa-trash-alt svelte-geqcr5"),m(C,"center",""),m(n,"class",O="game"+(e[0].done?" is-done":"")+" svelte-geqcr5")},m(t,a){c(t,n,a),D&&D.m(n,null),i(n,o),i(n,r),i(r,s),i(s,f),i(f,h),i(h,$),i(h,y),i(h,b),i(h,w),i(f,k),i(f,C),i(C,v),i(s,x),i(s,E),i(r,S),i(r,_);for(let t=0;t<L.length;t+=1)L[t].m(_,null);T||(G=g(v,"click",e[3]),T=!0)},p(t,[e]){t[0].done?D?D.p(t,e):(D=mt(t),D.c(),D.m(n,o)):D&&(D.d(1),D=null),1&e&&N!==(N=t[0].id+"")&&p(y,N),1&e&&M!==(M=B(t[0].date)+"")&&p(w,M),3&e&&(R=t[0].joiner,L=I(L,e,q,1,t,R,j,_,A,bt,null,gt)),1&e&&O!==(O="game"+(t[0].done?" is-done":"")+" svelte-geqcr5")&&m(n,"class",O)},i:t,o:t,d(t){t&&a(n),D&&D.d();for(let t=0;t<L.length;t+=1)L[t].d();T=!1,G()}}}function kt(t,e,n){let o,{game:r}=e,s=!1;Q.subscribe((t=>{n(2,o=t)}));return t.$$set=t=>{"game"in t&&n(0,r=t.game)},t.$$.update=()=>{5&t.$$.dirty&&n(1,s=r.joiner.length===o.maxjoiner)},[r,s,o,()=>async function(t){await W("DELETE","/games/"+t),st({message:"GAME_UPDATE",gameid:t,reason:"delete game"})}(r.id),t=>async function(t,e){st({message:"GOGOGO",gameid:e,joinerid:t})}(t.id,r.id),t=>async function(t,e){const n=(await W("GET","/games/"+e)).joiner.filter((e=>e.id!==t));await W("PATCH","/games/"+e,{joiner:n}),st({message:"GAME_UPDATE",gameid:e,joinerid:t,reason:"delete joiner"})}(t.id,r.id)]}class Ct extends J{constructor(t){super(),z(this,t,kt,wt,s,{game:0})}}function vt(t,e,n){const o=t.slice();return o[1]=e[n],o}function xt(t,e){let n,o,r;return o=new Ct({props:{game:e[1]}}),{key:t,first:null,c(){n=f(),R(o.$$.fragment),this.first=n},m(t,e){c(t,n,e),q(o,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.game=e[1]),o.$set(r)},i(t){r||(L(o.$$.fragment,t),r=!0)},o(t){j(o.$$.fragment,t),r=!1},d(t){t&&a(n),P(o,t)}}}function Et(t){let e,n,r,s,u=[],f=new Map,g=t[0];const p=t=>t[1].id;for(let e=0;e<g.length;e+=1){let n=vt(t,g,e),o=p(n);f.set(o,u[e]=xt(o,n))}return{c(){e=l("div"),n=l("h2"),n.textContent="Games",r=d();for(let t=0;t<u.length;t+=1)u[t].c();m(e,"class","games container")},m(t,o){c(t,e,o),i(e,n),i(e,r);for(let t=0;t<u.length;t+=1)u[t].m(e,null);s=!0},p(t,[n]){1&n&&(g=t[0],M={r:0,c:[],p:M},u=I(u,n,p,1,t,g,f,e,D,xt,null,vt),M.r||o(M.c),M=M.p)},i(t){if(!s){for(let t=0;t<g.length;t+=1)L(u[t]);s=!0}},o(t){for(let t=0;t<u.length;t+=1)j(u[t]);s=!1},d(t){t&&a(e);for(let t=0;t<u.length;t+=1)u[t].d()}}}function St(t,e,n){let o;return K.subscribe((t=>n(0,o=t))),[o]}class _t extends J{constructor(t){super(),z(this,t,St,Et,s,{})}}function Ot(t,e,n){const o=t.slice();return o[5]=e[n],o}function Tt(t,e){let n,o,r,s,f,g,h,$,y,b,w,k,C,v,x=e[5].id+"",E=e[5].nick+"",S=e[5].isThisYou?" (You)":"",_=e[5].type+"",O=B(e[5].lastseendate)+"";return{key:t,first:null,c(){n=l("tr"),o=l("td"),r=u(x),s=d(),f=l("td"),g=u(E),h=u(S),$=l("br"),y=l("span"),b=u(_),w=d(),k=l("td"),C=u(O),v=d(),m(y,"class","ms--1"),this.first=n},m(t,e){c(t,n,e),i(n,o),i(o,r),i(n,s),i(n,f),i(f,g),i(f,h),i(f,$),i(f,y),i(y,b),i(n,w),i(n,k),i(k,C),i(n,v)},p(t,n){e=t,1&n&&x!==(x=e[5].id+"")&&p(r,x),1&n&&E!==(E=e[5].nick+"")&&p(g,E),1&n&&S!==(S=e[5].isThisYou?" (You)":"")&&p(h,S),1&n&&_!==(_=e[5].type+"")&&p(b,_),1&n&&O!==(O=B(e[5].lastseendate)+"")&&p(C,O)},d(t){t&&a(n)}}}function Gt(e){let n,r,s,u,f,p,$,y,b,w,k,C,v,x,E=[],S=new Map,_=e[0];const O=t=>t[5].id;for(let t=0;t<_.length;t+=1){let n=Ot(e,_,t),o=O(n);S.set(o,E[t]=Tt(o,n))}return{c(){n=l("div"),r=l("h2"),r.textContent="Clients",s=d(),u=l("div"),f=l("input"),p=d(),$=l("button"),$.textContent="Set your clientname",y=d(),b=l("table"),w=l("thead"),w.innerHTML="<tr><th>Id</th> \n            <th>Nick</th> \n            <th>Lastseen</th></tr>",k=d(),C=l("tbody");for(let t=0;t<E.length;t+=1)E[t].c();m(f,"type","text"),m(f,"placeholder","anonymous"),m(u,"class","mb-sm"),m(n,"class","clients container")},m(t,o){c(t,n,o),i(n,r),i(n,s),i(n,u),i(u,f),h(f,e[1]),i(u,p),i(u,$),i(n,y),i(n,b),i(b,w),i(b,k),i(b,C);for(let t=0;t<E.length;t+=1)E[t].m(C,null);v||(x=[g(f,"input",e[3]),g(f,"keypress",e[4]),g($,"click",e[2])],v=!0)},p(t,[e]){2&e&&f.value!==t[1]&&h(f,t[1]),1&e&&(_=t[0],E=I(E,e,O,1,t,_,S,C,A,Tt,null,Ot))},i:t,o:t,d(t){t&&a(n);for(let t=0;t<E.length;t+=1)E[t].d();v=!1,o(x)}}}function Nt(t,e,n){let o,r=[];V.subscribe((t=>n(0,r=t)));const s=()=>{it(o)};b((()=>{n(1,o=tt("nickname"))}));return[r,o,s,function(){o=this.value,n(1,o)},t=>"enter"===t.key.toLowerCase()&&s()]}class Mt extends J{constructor(t){super(),z(this,t,Nt,Gt,s,{})}}function Lt(e){let n,o,r;return{c(){n=l("button"),n.innerHTML='<i class="fas fa-bell svelte-ed32sm"></i>',m(n,"class","svelte-ed32sm")},m(t,s){c(t,n,s),o||(r=g(n,"click",e[2]),o=!0)},p:t,d(t){t&&a(n),o=!1,r()}}}function jt(e){let n,o=!e[0]&&Lt(e);return{c(){o&&o.c(),n=f()},m(t,e){o&&o.m(t,e),c(t,n,e)},p(t,[e]){t[0]?o&&(o.d(1),o=null):o?o.p(t,e):(o=Lt(t),o.c(),o.m(n.parentNode,n))},i:t,o:t,d(t){o&&o.d(t),t&&a(n)}}}const At="granted";function Dt(t,e,n){const o=window.Notification||window.mozNotification||window.webkitNotification,r=()=>{o.requestPermission((function(t){n(0,s=t===At),"permissions"in navigator&&navigator.permissions.query({name:"notifications"}).then((function(t){t.onchange=function(){n(0,s=t.state===At)}}))}))};let s=!1;b((()=>{n(0,s=o.permission===At)}));return[s,r,()=>r()]}class It extends J{constructor(t){super(),z(this,t,Dt,jt,s,{})}}function Rt(e){let n,o,r,s,u,f,g,m,p,h,$;return o=new lt({}),s=new ft({}),f=new _t({}),m=new Mt({}),h=new It({}),{c(){n=l("main"),R(o.$$.fragment),r=d(),R(s.$$.fragment),u=d(),R(f.$$.fragment),g=d(),R(m.$$.fragment),p=d(),R(h.$$.fragment)},m(t,e){c(t,n,e),q(o,n,null),i(n,r),q(s,n,null),i(n,u),q(f,n,null),i(n,g),q(m,n,null),i(n,p),q(h,n,null),$=!0},p:t,i(t){$||(L(o.$$.fragment,t),L(s.$$.fragment,t),L(f.$$.fragment,t),L(m.$$.fragment,t),L(h.$$.fragment,t),$=!0)},o(t){j(o.$$.fragment,t),j(s.$$.fragment,t),j(f.$$.fragment,t),j(m.$$.fragment,t),j(h.$$.fragment,t),$=!1},d(t){t&&a(n),P(o),P(s),P(f),P(m),P(h)}}}function qt(t){var e;return e=t=>{switch(t.message){case"CONNECTION_ON":Z.update((e=>t.clientid));const n=localStorage.getItem("nickname");null!==n&&it(n);break;case"GAME_UPDATE":case"GAME_READY":case"GAME_GOGOGO":F();break;case"CLIENT_UPDATE":e=t.clients,V.update((t=>e));break;case"ERROR":console.error("wss",t)}var e},console.log(nt,"connectToWSS",et),ot=new WebSocket(et),ot.onmessage=async t=>{const n=t.data;console.log(nt,"onmessage",JSON.parse(n)),e(JSON.parse(n))},ot.onopen=ct,ot.onping=ct,ot.onerror=t=>{console.error(nt,"socket.error",t),e({message:"ERROR",error:t})},ot.onclose=t=>{console.log(nt,"socket.close",t),clearTimeout(rt),e({message:"CLOSE",error:t})},window.onbeforeunload=()=>{ot.onclose=()=>{},ot.close()},[]}return new class extends J{constructor(t){super(),z(this,t,qt,Rt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
